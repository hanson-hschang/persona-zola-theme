{#
  Render Macros
  These macros are used to render various components of the website.
  The macros include:
  - post_entry: Renders a blog post-entry with title, date, link, and excerpt.
  - section_title: Renders a section title with an optional subtitle.
  - text_content: Renders a block of text content.
  - share_menu: Renders a share menu with various sharing options.
  - cards: Renders a grid of cards for sections.
  - breadcrumbs: Renders a breadcrumb navigation based on a list of crumbs.
#}

{% macro post_entry(title, date, link, excerpt) %}
<li class="container post-entry border-bottom">
  <div class="post-meta d-flex justify-content-between align-items-center">
    <h4 class="post-title">
      <a href="{{ link }}">{{ title }}</a>
    </h4>
    <h5 class="post-date">{{ date }}</h5>
  </div>
  <p class="mb-4 d-block">{{ excerpt }}</p>
</li>
{% endmacro %}

{% macro section_title(title, subtitle="") %}
<div class="container" data-aos="fade-up">
  <div class="section-title">
    <h2>{{ title }}</h2>
    {% if subtitle %}
      <em>{{ subtitle | safe }}</em>
    {% endif %}
  </div>
</div>
{% endmacro %}

{% macro text_content(content) %}
<div class="container" data-aos="fade-up" data-aos-delay="200">
  <div class="row gy-4 justify-content-center">
    <div class="col-lg-9 content fst-italic">
      {{ content | safe }}
    </div>
  </div>
</div>
{% endmacro %}

{% macro share_menu(title, permalink) %}
<div id="share-menu" class="share-menu">
  <a id="share-link" class="share-menu-item" href="#" >
    <i class="bi bi-link-45deg" aria-hidden="true"></i>
    <span>Get link</span>
  </a>
  <div class="share-menu-divider"></div>
  <a id="share-linkedin" class="share-menu-item" href="https://www.linkedin.com/sharing/share-offsite/?url={{ permalink }}" target="_blank" rel="noopener noreferrer">
    <i class="bi bi-linkedin" aria-hidden="true"></i>
    <span>Share on LinkedIn</span>
  </a>
  <a id="share-facebook" class="share-menu-item" href="https://www.facebook.com/sharer/sharer.php?u={{ permalink }}" target="_blank" rel="noopener noreferrer">
    <i class="bi bi-facebook" aria-hidden="true"></i>
    <span>Share on Facebook</span>
  </a>
  <a id="share-x" class="share-menu-item" href="https://x.com/intent/tweet?url={{ permalink }}" target="_blank" rel="noopener noreferrer">
    <i class="bi bi-twitter-x" aria-hidden="true"></i>
    <span>Share on X</span>
  </a>
  <a id="share-email" class="share-menu-item" href="mailto:?subject={{ title }}&body={{ permalink }}">
    <i class="bi bi-envelope-fill" aria-hidden="true"></i>
    <span>Email</span>
  </a>
</div>
{% endmacro %}

{% macro cards(sections) %}
<div class="container" data-aos="fade-up" data-aos-delay="200">
  <div class="row m-0 justify-content-center">
    {% for section in sections | sort(attribute="extra.order") %}
      <div class="col-sm-6 col-md-6 mb-4 mb-lg-0 col-lg-4">
        {# The data-aos-delay is now generated dynamically based on the loop's position #}
        <div class="post-entry" data-aos="fade-up" data-aos-delay="{{ loop.index * 100 }}">
          <a href="{{ section.permalink }}" class="thumb d-block">
            {# Build the thumbnail URL correctly using the section's path and the thumbnail filename #}
            <img class="img-fluid" src="{{ get_url(path=section.path ~ section.extra.thumbnail) }}" alt="Thumbnail for {{ section.title }}">
          </a>
          <div class="post-content">
            <h3><a href="{{ section.permalink }}">{{ section.title }}</a></h3>
            {# The content div from the original was removed for simplicity, you can add it back if needed #}
            <p> {{ section.description }} </p>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
</div>
{% endmacro %}

{% macro breadcrumbs(crumbs) %}
<div class="page-title d-flex align-items-center">
  <div class="container" data-aos="fade">
    <nav class="breadcrumbs">
      <ol>
        {% set_global url = "/" %}
        <li><a href="{{ url }}">Home</a></li>
        {% for crumb in crumbs %}
          {% set_global url = url ~ crumb ~ "/" %}
          {% if loop.last %}
            <li class="current"></li>
            {% else %}
            <li><a href="{{ url }}">{{ crumb | capitalize }}</a></li>
          {% endif %}
        {% endfor %}
      </ol>
    </nav>
  </div>
</div>
{% endmacro %}
